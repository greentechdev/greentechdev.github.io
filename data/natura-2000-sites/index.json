
{
  "name": "Natura 2000 sites",
  "updated": "2020-06-10 00:00:00 +0000 UTC",
  "description" : "The Swedish sites as part of the Natura 2000 network of protected sites for rare species or habitat types",
  "permalink" : "/data/natura-2000-sites/",
  "tags": ["sites"],
  "content" : "\r\n# Natura 2000 sites\r\n\r\nThe Swedish sites as part of the EU-wide Natura 2000 network of protected sites for rare species or habitat types (e.g. special types of forest or grasslands). The sites can be both terrestrial and marine protected areas.\r\n\r\nEuropean Commission on [Natura 2000](https://ec.europa.eu/environment/nature/natura2000/index_en.htm).\r\n\r\n## Data quality\r\n\r\nNo information.\r\n\r\n## License & conditions \r\n\r\n{{< license-cc0 >}}\r\n\r\n## Data model\r\n\r\nTo better understand this data, the following model covers the basic parts:\r\n\r\n![N2000 model](https://greentechdev.github.io/n2000model.png)\r\n\r\n* Site - the geographical area being protected \r\n* Species - rare species in the site causing it to be protected\r\n* Nature types - rare nature types in the site causing it to be protected\r\n* Documents - mainly maintainance plans for the site\r\n\r\n## Distributions\r\n\r\nThe data is made available via a HTTP/REST API.\r\n\r\n### REST API\r\n\r\n* [Download OpenAPI specification](https://raw.githubusercontent.com/greentechdev/greentechdev.github.io/master/n2000_api.json)\r\n* [Improve this specification](https://github.com/greentechdev/greentechdev.github.io/edit/master/n2000_api.json)\r\n\r\n## Example usage\r\n\r\nSee the following example for an illustration of how to use the API and data. It's written in JavaScript, so it's easy to try without downloading or installing anything. Click the button _\"Try it!\"_ below each block of code, or the link _\"Edit in JSFiddle\"_ in the top right corner of the live example to edit, run and play with them further.\r\n\r\n### Chart protected areas for fish\r\n\r\nHere we combine the data from the API with general data about regions to visualize the amount of protected area in relation to the total area of each region. To examplify the filtering capabilities, we narrowed down the protected areas to those that contain the species group 'fish'. End result is: \r\n\r\n[Demo](https://jsfiddle.net/vzb2qear/5/)\r\n\r\nSo in three simple steps:\r\n\r\n1) Compile the reference data:\r\n\r\n    ```js\r\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\r\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\r\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\r\n    ```\r\n\r\n    find the species group to filter on:\r\n\r\n    ```js\r\n    //make a search query for our term NO2\r\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/artgrupper\")\r\n      .then(response => response.json())\r\n      .then(data => document.getElementById(\"results\").innerHTML = JSON.stringify(data, null, 2));\r\n    ```\r\n    in the resultset we take key: \"F - Fiskar\" for fish\r\n    ```js  \r\n    {\r\n      \"typ\": {\r\n        \"key\": \"F - Fiskar\",\r\n        \"value\": \"F - Fiskar\"\r\n      }\r\n    },\r\n    ```\r\n\r\n1) Get the protected sites data and transform it into chartable data\r\n\r\n    ```js\r\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\r\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\r\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\r\n\r\n    var fancyColours = [\"#C48793\",\"#E8ADAA\",\"#ECC5C0\",\"#EDC9AF\",\"#FDD7E4\",\"#FCDFFF\",\"#FFDFDD\",\"#FBBBB9\",\"#FAAFBE\",\"#FAAFBA\",\"#F9A7B0\",\"#E7A1B0\",\"#E799A3\",\"#E38AAE\",\"#F778A1\",\"#E56E94\",\"#F660AB\",\"#FC6C85\",\"#F6358A\",\"#F52887\",\"#E45E9D\",\"#E4287C\",\"#F535AA\",\"#FF00FF\",\"#E3319D\"];\r\n\r\n    //Call the API to get the data\r\n    //use /nolinks to avoid retrieving data we won't use\r\n    //increase the limit to make sure we get all sites\r\n    //filter by species group (i.e. \"artgrupp\")\r\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/omrade/nolinks?limit=10000000&artgrupp=F%20-%20Fiskar\")\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(function(item) {\r\n          //Sum up sites per region\r\n          if (!regionData[item.omrade.lanAsText].protectedSize) {\r\n            regionData[item.omrade.lanAsText].protectedSize = item.omrade.areaHa;\r\n            regionData[item.omrade.lanAsText].protectedCount = 1;\r\n          } else {\r\n            regionData[item.omrade.lanAsText].protectedSize += item.omrade.areaHa;\r\n            regionData[item.omrade.lanAsText].protectedCount += 1;\r\n          }\r\n        });    \r\n        //Create dataset for ChartJs display\r\n        //transform protected area from hectares to km2\r\n        //put region area on x-axis, sum of sites area on the y-axis\r\n        //bubble size set to the count of sites within the region \r\n        var bubbles = [];\r\n        var i = 0;\r\n        for (var key of Object.keys(regionData)) {\r\n          bubbles.push({\r\n            \"label\": key,\r\n            \"backgroundColor\": fancyColours[i],\r\n            \"data\": [{\r\n              \"x\": regionData[key].areaKm2,\r\n              \"y\": Math.round(regionData[key].protectedSize/100),\r\n              \"r\": regionData[key].protectedCount\r\n            }]\r\n          });\r\n          i++;\r\n        }\r\n        document.getElementById(\"results\").innerHTML = JSON.stringify(bubbles, null, 2);\r\n      });\r\n    ```\r\n    1) Finally create the bubble chart and populate it with the data prepared\r\n\r\n    ```js\r\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\r\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\r\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\r\n\r\n    var fancyColours = [\"#C48793\",\"#E8ADAA\",\"#ECC5C0\",\"#EDC9AF\",\"#FDD7E4\",\"#FCDFFF\",\"#FFDFDD\",\"#FBBBB9\",\"#FAAFBE\",\"#FAAFBA\",\"#F9A7B0\",\"#E7A1B0\",\"#E799A3\",\"#E38AAE\",\"#F778A1\",\"#E56E94\",\"#F660AB\",\"#FC6C85\",\"#F6358A\",\"#F52887\",\"#E45E9D\",\"#E4287C\",\"#F535AA\",\"#FF00FF\",\"#E3319D\"];\r\n\r\n    //Call the API to get the data\r\n    //use /nolinks to avoid retrieving data we won't use\r\n    //increase the limit to make sure we get all sites\r\n    //filter by species group (i.e. \"artgrupp\")\r\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/omrade/nolinks?limit=10000000&artgrupp=F%20-%20Fiskar\")\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        data.forEach(function(item) {\r\n\r\n          //Sum up sites per region\r\n          if (!regionData[item.omrade.lanAsText].protectedSize) {\r\n            regionData[item.omrade.lanAsText].protectedSize = item.omrade.areaHa;\r\n            regionData[item.omrade.lanAsText].protectedCount = 1;\r\n          } else {\r\n            regionData[item.omrade.lanAsText].protectedSize += item.omrade.areaHa;\r\n            regionData[item.omrade.lanAsText].protectedCount += 1;\r\n          }\r\n        });    \r\n        //Create dataset for ChartJs display\r\n        //transform protected area from hectares to km2\r\n        //put region area on x-axis, sum of sites area on the y-axis\r\n        //bubble size set to the count of sites within the region \r\n        var bubbles = [];\r\n        var i = 0;\r\n        for (var key of Object.keys(regionData)) {\r\n          bubbles.push({\r\n            \"label\": key,\r\n            \"backgroundColor\": fancyColours[i],\r\n            \"data\": [{\r\n              \"x\": regionData[key].areaKm2,\r\n              \"y\": Math.round(regionData[key].protectedSize/100),\r\n              \"r\": regionData[key].protectedCount\r\n            }]\r\n          });\r\n          i++;\r\n        }\r\n\r\n        // Create the chart\r\n        new Chart(document.getElementById(\"myChart\"), {\r\n          type: 'bubble',\r\n          data: {\r\n            datasets: bubbles\r\n          },\r\n          options: {\r\n            title: {\r\n              display: true,\r\n              text: 'Protected areas for fish - number of sites and comparison with region area'\r\n            },\r\n            legend: { \r\n              display: false \r\n            },\r\n            scales: {\r\n              yAxes: [{ \r\n                scaleLabel: {\r\n                  display: true,\r\n                  labelString: \"Protected area (km²)\"\r\n                }\r\n              }],\r\n              xAxes: [{ \r\n                scaleLabel: {\r\n                  display: true,\r\n                  labelString: \"Region area (km²)\"\r\n                }\r\n              }]\r\n            },\r\n            tooltips: {\r\n              callbacks: {\r\n                label: function(tooltipItem, data) {\r\n                  var label = data.datasets[tooltipItem.datasetIndex].label || '';\r\n                  if (label) {\r\n                    label += ' (sites: ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].r + \", protected area: \" + tooltipItem.value + \", region area: \" + tooltipItem.label;\r\n                }\r\n                        return label;\r\n                    }\r\n                }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    ```\r\n    Done!"
}
