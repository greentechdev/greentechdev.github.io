
{
  "name": "Natura 2000 sites",
  "updated": "2020-06-10 00:00:00 +0000 UTC",
  "description" : "The Swedish sites as part of the Natura 2000 network of protected sites for rare species or habitat types",
  "permalink" : "/data/natura-2000-sites/",
  "tags": ["sites"],
  "content" : "\n# Natura 2000 sites\n\nThe Swedish sites as part of the EU-wide Natura 2000 network of protected sites for rare species or habitat types (e.g. special types of forest or grasslands). The sites can be both terrestrial and marine protected areas.\n\nEuropean Commission on [Natura 2000](https://ec.europa.eu/environment/nature/natura2000/index_en.htm).\n\n## Data quality\n\nSee the Swedish EPA's metadata catalogue for details: [Natura 2000 SCI/SAC](https://metadatakatalogen.naturvardsverket.se/metadatakatalogen/GetMetaDataById?id=945e918f-8426-4155-8fd6-3f780a85dd8f) and [Natura 2000 SPA](https://metadatakatalogen.naturvardsverket.se/metadatakatalogen/GetMetaDataById?id=a80bf3d7-e70c-42d1-9b8d-8148e53e011d) (Swedish).\n\n## License & conditions \n\n{{< license-cc0 >}}\n\n## Data model\n\nTo better understand this data, the following model covers the basic parts:\n\n![N2000 data model](https://greentechdev.github.io/n2000model.png)\n\n* Site - the geographical area being protected \n* Species - rare species in the site causing it to be protected\n* Species groups - groups of rare species\n* Nature types - rare nature types in the site causing it to be protected\n* Documents - mainly maintainance plans for the site\n\n## Distributions\n\nThe OpenApi specification and examples below describe a REST API that exposes the whole data model, but has some limitations in the spatial aspects, e.g. geometries are only available in WKT format and there is no possibility to filter the results spatially. \n\nHowever, a subset of this data is exposed through OGC Standard Compliant WMS and WFS services. If your use case requires spatial operations we recommend combining this API with either OGC services.\n\n### WMS and WFS services\n\nFor more information regarding the data and the OGC services, see [this document](https://gpt.vic-metria.nu/data/land/Naturvardsregistret_beskrivning_av_oppna_data.pdf) (Swedish).\n\nThe WMS service is available at\n* https://nvpub.vic-metria.nu/arcgis/services/N2000/MapServer/WMSServer\n\nThe WFS service is available at\n* https://nvpub.vic-metria.nu/arcgis/services/N2000_WFS/MapServer/WFSServer\n\n### REST API\n\n* [Download OpenAPI specification](https://raw.githubusercontent.com/greentechdev/greentechdev.github.io/master/n2000_api.yaml)\n* [Improve this specification](https://github.com/greentechdev/greentechdev.github.io/edit/master/n2000_api.yaml)\n\n{{< swagger-ui url=\"https://petstore.swagger.io/?url=https://raw.githubusercontent.com/greentechdev/greentechdev.github.io/master/n2000_api.yaml\" height=\"1000\" >}}\n\n## Example usage\n\nSee the following example for an illustration of how to use the API and data. It's written in JavaScript, so it's easy to try without downloading or installing anything. Click the button _\"Try it!\"_ below each block of code, or the link _\"Edit in JSFiddle\"_ in the top right corner of the live example to edit, run and play with them further.\n\n### Chart protected areas for fish\n\nHere we combine the data from the API with general data about regions to visualize the amount of protected area in relation to the total area of each region. To examplify the filtering capabilities, we narrowed down the protected areas to those that contain the species group 'fish'. End result is: \n\n[Demo](https://jsfiddle.net/vzb2qear/5/)\n\nSo in three simple steps:\n\n1) Compile the reference data:\n\n    ```js\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\n    ```\n\n    find the species group to filter on:\n\n    ```js\n    //make a search query for our term NO2\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/artgrupper\")\n      .then(response => response.json())\n      .then(data => document.getElementById(\"results\").innerHTML = JSON.stringify(data, null, 2));\n    ```\n    {{< fiddle printResults=\"true\" displayChart=\"false\" >}}\n\n    in the resultset we take key: \"F - Fiskar\" for fish\n    ```js  \n    {\n      \"typ\": {\n        \"key\": \"F - Fiskar\",\n        \"value\": \"F - Fiskar\"\n      }\n    },\n    ```\n\n1) Get the protected sites data and transform it into chartable data\n\n    ```js\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\n\n    var fancyColours = [\"#C48793\",\"#E8ADAA\",\"#ECC5C0\",\"#EDC9AF\",\"#FDD7E4\",\"#FCDFFF\",\"#FFDFDD\",\"#FBBBB9\",\"#FAAFBE\",\"#FAAFBA\",\"#F9A7B0\",\"#E7A1B0\",\"#E799A3\",\"#E38AAE\",\"#F778A1\",\"#E56E94\",\"#F660AB\",\"#FC6C85\",\"#F6358A\",\"#F52887\",\"#E45E9D\",\"#E4287C\",\"#F535AA\",\"#FF00FF\",\"#E3319D\"];\n\n    //Call the API to get the data\n    //use /nolinks to avoid retrieving data we won't use\n    //filter by species group (i.e. \"artgrupp\")\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/omrade/nolinks?artgrupp=F%20-%20Fiskar\")\n      .then(response => response.json())\n      .then(data => {\n        data.forEach(function(item) {\n          \n          //Sum up sites per region\n          if (!regionData[item.omrade.lanAsText].protectedSize) {\n            regionData[item.omrade.lanAsText].protectedSize = item.omrade.areaHa;\n            regionData[item.omrade.lanAsText].protectedCount = 1;\n          } else {\n            regionData[item.omrade.lanAsText].protectedSize += item.omrade.areaHa;\n            regionData[item.omrade.lanAsText].protectedCount += 1;\n          }\n        });    \n      \n        //Create dataset for ChartJs display\n        //transform protected area from hectares to km2\n        //put region area on x-axis, sum of sites area on the y-axis\n        //bubble size set to the count of sites within the region \n        var bubbles = [];\n        var i = 0;\n        for (var key of Object.keys(regionData)) {\n          bubbles.push({\n            \"label\": key,\n            \"backgroundColor\": fancyColours[i],\n            \"data\": [{\n              \"x\": regionData[key].areaKm2,\n              \"y\": Math.round(regionData[key].protectedSize/100),\n              \"r\": regionData[key].protectedCount\n            }]\n          });\n          i++;\n        }\n        document.getElementById(\"results\").innerHTML = JSON.stringify(bubbles, null, 2);\n      });\n    ```\n    {{< fiddle printResults=\"true\" displayChart=\"false\" >}}\n    \n1) Finally create the bubble chart and populate it with the data prepared\n\n    ```js\n    //Region data from https://sv.wikipedia.org/wiki/Sveriges_l%C3%A4n\n    //Transformed into json with e.g. https://www.convertcsv.com/csv-to-json.htm\n    var regionData = {\"Norrbottens län\":{\"areaKm2\":97239},\"Västerbottens län\":{\"areaKm2\":54665},\"Jämtlands län\":{\"areaKm2\":48935},\"Västernorrlands län\":{\"areaKm2\":21549},\"Gävleborgs län\":{\"areaKm2\":18118},\"Dalarnas län\":{\"areaKm2\":28029},\"Uppsala län\":{\"areaKm2\":8190},\"Värmlands län\":{\"areaKm2\":17519},\"Västmanlands län\":{\"areaKm2\":5118},\"Stockholms län\":{\"areaKm2\":6524},\"Örebro län\":{\"areaKm2\":8504},\"Södermanlands län\":{\"areaKm2\":6075},\"Östergötlands län\":{\"areaKm2\":10559},\"Jönköpings län\":{\"areaKm2\":10437},\"Västra Götalands län\":{\"areaKm2\":23800},\"Gotlands län\":{\"areaKm2\":3135},\"Kronobergs län\":{\"areaKm2\":8424},\"Kalmar län\":{\"areaKm2\":11165},\"Hallands län\":{\"areaKm2\":5427},\"Blekinge län\":{\"areaKm2\":2931},\"Skåne län\":{\"areaKm2\":10968}};\n\n    var fancyColours = [\"#C48793\",\"#E8ADAA\",\"#ECC5C0\",\"#EDC9AF\",\"#FDD7E4\",\"#FCDFFF\",\"#FFDFDD\",\"#FBBBB9\",\"#FAAFBE\",\"#FAAFBA\",\"#F9A7B0\",\"#E7A1B0\",\"#E799A3\",\"#E38AAE\",\"#F778A1\",\"#E56E94\",\"#F660AB\",\"#FC6C85\",\"#F6358A\",\"#F52887\",\"#E45E9D\",\"#E4287C\",\"#F535AA\",\"#FF00FF\",\"#E3319D\"];\n\n    //Call the API to get the data\n    //use /nolinks to avoid retrieving data we won't use\n    //increase the limit to make sure we get all sites\n    //filter by species group (i.e. \"artgrupp\")\n    fetch(\"https://nvpub.vic-metria.nu/n2000/rest/omrade/nolinks?limit=1000&artgrupp=F%20-%20Fiskar\")\n      .then(response => response.json())\n      .then(data => {\n        data.forEach(function(item) {\n\n          //Sum up sites per region\n          if (!regionData[item.omrade.lanAsText].protectedSize) {\n            regionData[item.omrade.lanAsText].protectedSize = item.omrade.areaHa;\n            regionData[item.omrade.lanAsText].protectedCount = 1;\n          } else {\n            regionData[item.omrade.lanAsText].protectedSize += item.omrade.areaHa;\n            regionData[item.omrade.lanAsText].protectedCount += 1;\n          }\n        });    \n      \n        //Create dataset for ChartJs display\n        //transform protected area from hectares to km2\n        //put region area on x-axis, sum of sites area on the y-axis\n        //bubble size set to the count of sites within the region \n        var bubbles = [];\n        var i = 0;\n        for (var key of Object.keys(regionData)) {\n          bubbles.push({\n            \"label\": key,\n            \"backgroundColor\": fancyColours[i],\n            \"data\": [{\n              \"x\": regionData[key].areaKm2,\n              \"y\": Math.round(regionData[key].protectedSize/100),\n              \"r\": regionData[key].protectedCount\n            }]\n          });\n          i++;\n        }\n\n        // Create the chart\n        new Chart(document.getElementById(\"myChart\"), {\n          type: 'bubble',\n          data: {\n            datasets: bubbles\n          },\n          options: {\n            title: {\n              display: true,\n              text: 'Protected areas for fish - number of sites and comparison with region area'\n            },\n            legend: { \n              display: false \n            },\n            scales: {\n              yAxes: [{ \n                scaleLabel: {\n                  display: true,\n                  labelString: \"Protected area (km²)\"\n                }\n              }],\n              xAxes: [{ \n                scaleLabel: {\n                  display: true,\n                  labelString: \"Region area (km²)\"\n                }\n              }]\n            },\n            tooltips: {\n              callbacks: {\n                label: function(tooltipItem, data) {\n                  var label = data.datasets[tooltipItem.datasetIndex].label || '';\n                  if (label) {\n                    label += ' (sites: ' + data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index].r + \", protected area: \" + tooltipItem.value + \", region area: \" + tooltipItem.label;\n                }\n                        return label;\n                    }\n                }\n            }\n          }\n        });\n      });\n    ```\n    {{< fiddle printResults=\"false\" displayChart=\"true\" >}}\n\n    Done!"
}
